4.5.3 Можно вместе 


Чтобы заархивировать и скомпрессировать группу файлов, вы можете использовать команды:

 

    # tar cvf backup.tar /etc
    # gzip -9 backup.tar




Результат будет backup.tar.gz. Для распаковки этого файла используйте обратную последовательность команд:

 

    # gunzip backup.tar.gz
    # tar xvf backup.tar




Разумеется, всегда следует убедиться перед распаковкой файла, что вы в нужном каталоге.

 


Вы можете опереться на некоторую сообразительность UNIX, позволяющего сделать это одной командой (прим. переводчика: Верно, но сказать - одной "командной строкой" - было бы честнее, да и проще описывать работу этой конструкции). 



    # tar cvf - /etc | gzip -9c > backup.tar.gz




Здесь мы посылаем tar-файл, сформированный из /etc, в файл ``-'', который представляет стандартный выход. Результат по конвейеру поступает на вход команды gzip, которая компрессирует этот файл и результат сохраняет в backup.tar.gz. Опция -c команды gzip говорит, что выход команды gzip посылает результат на стандартный выход, который перенаправляется на backup.tar.gz.

 


Единственная составная команда, используемая для распаковки этого архива, будет:

 

    # gunzip -c backup.tar.gz | tar xvf -




Опять, команда gunzip раскомпрессирует содержимое файла backup.tar.gz и посылает результирующий файл на стандартный выход. Он по конвейеру передается команде tar, которая читает файл ``-'', что в данном случае олицетворяет стандартный выход.

 


К счастью, команда tar также содержит опцию z, автоматически компрессируя-раскомпрессируя файлы, используя алгоритм компрессии gzip.

 


Например, команда (прим. переводчика: одна)

 

    # tar cvfz backup.tar.gz /etc




эквивалентна

 

    # tar cvf backup.tar /etc
    # gzip backup.tar




Как и команда

 

    # tar xvfz backup.tar.Z




может быть использована вместо

 

    # uncompress backup.tar.Z
    # tar xvf backup.tar




За дополнительной информацией обратитесь к Руководству по tar и gzip.

 
